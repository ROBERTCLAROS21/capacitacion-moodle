<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Capacitaci√≥n para docentes: Domina el aula virtual con Moodle</title>
  <meta name="description" content="Flyer interactivo: Capacitaci√≥n para docentes - Domina el aula virtual con Moodle" />
  <style>
    :root{
      --bg: #0e1726;
      --card: #111a2b;
      --muted:#6b87b1;
      --text:#e6eefc;
      --accent:#ffd166;
      --primary:#4cc9f0;
      --success:#7ce38b;
      --danger:#ff6b6b;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    * {box-sizing: border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif}
    a{color:var(--primary);text-decoration:none}
    .wrap{max-width:1100px;margin:auto;padding:28px}
    header{
      display:grid; gap:8px;
      padding:28px; border-radius:var(--radius);
      background: radial-gradient(1200px 600px at 80% -20%, rgba(76,201,240,.25), transparent),
                  radial-gradient(900px 500px at -10% -20%, rgba(255,209,102,.2), transparent),
                  var(--card);
      box-shadow: var(--shadow);
      position: relative; overflow: hidden;
    }
    .badge{display:inline-flex;gap:8px;align-items:center;background:rgba(76,201,240,.1);color:var(--primary);border:1px solid rgba(76,201,240,.3);padding:6px 12px;border-radius:999px;font-weight:600}
    h1{font-size: clamp(28px, 3.5vw, 44px); margin:6px 0}
    .subtitle{max-width:70ch;color:#cdd8ee}
    .grid{display:grid; gap:18px}
    @media(min-width:900px){ .grid{grid-template-columns: 1.4fr .9fr} }
    .card{background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); box-shadow:var(--shadow)}
    .pad{padding:20px}
    .dates{display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:16px}
    .date-card{position:relative; padding:16px; border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); border:1px solid rgba(255,255,255,.1)}
    .date-card h3{margin:6px 0 2px; font-size:20px}
    .date-card .meta{color:var(--muted); font-size:14px}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.15); background:rgba(255,255,255,.04); color:var(--text); cursor:pointer; font-weight:600}
    .btn:hover{background:rgba(255,255,255,.08)}
    .btn.primary{background:linear-gradient(180deg, rgba(76,201,240,.25), rgba(76,201,240,.15)); border-color:rgba(76,201,240,.6)}
    .btn.accent{background:linear-gradient(180deg, rgba(255,209,102,.25), rgba(255,209,102,.15)); border-color:rgba(255,209,102,.6); color:#1d263b}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    details.module{border:1px solid rgba(255,255,255,.12); border-radius:14px; overflow:hidden}
    details.module summary{cursor:pointer; list-style:none; padding:14px 16px; background:rgba(255,255,255,.04); font-weight:700}
    details.module[open] summary{background:rgba(255,255,255,.08)}
    details.module .content{padding:14px 16px; color:#cfe2ff}
    .form-row{display:grid; gap:12px; grid-template-columns: 1fr}
    @media(min-width:680px){ .form-row{grid-template-columns: 1.2fr 1.2fr} }
    input, select, textarea{
      width:100%; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.16);
      background:rgba(0,0,0,.25); color:var(--text); outline:none;
    }
    label{font-size:14px; color:#cbd6ee; display:block; margin-bottom:6px}
    .notice{padding:12px 14px; border:1px dashed rgba(255,255,255,.25); border-radius:12px; color:#b9c7e8}
    .footer{opacity:.8; font-size:14px; padding:16px; text-align:center}
    .chip{display:inline-flex; align-items:center; gap:6px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); padding:6px 10px; border-radius:999px; font-size:12px; color:#cbd6ee}
    .switch{position:relative; width:54px; height:28px; background:rgba(255,255,255,.2); border-radius:999px; cursor:pointer; border:1px solid rgba(255,255,255,.25)}
    .switch i{position:absolute; top:2px; left:2px; width:24px; height:24px; background:white; border-radius:50%; transition:transform .2s}
    .switch.on i{transform: translateX(26px)}
    .stack{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .right{display:flex; justify-content:flex-end}
    .table{width:100%; border-collapse: collapse; font-size:14px}
    .table th,.table td{padding:10px 12px; border-bottom:1px dashed rgba(255,255,255,.15); text-align:left}
    .table tr:last-child td{border-bottom:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="card">
      <span class="badge">üéì Capacitaci√≥n para Docentes del Instituto Victor Ra√∫l Haya de la Torre</span>
      <h1>Domina el aula virtual con Moodle</h1>
      <p class="subtitle">Jornada pr√°ctica para fortalecer habilidades pedag√≥gicas y t√©cnicas e innovar en la educaci√≥n a distancia.</p>
      <div class="stack">
        <button id="btnShare" class="btn">üîó Compartir</button>
        <button id="btnExport" class="btn">‚¨áÔ∏è Exportar inscripciones (CSV)</button>
        <span class="chip">üìç Modalidad: Presencial</span>
        <span class="chip">‚è±Ô∏è Duraci√≥n: 2 sesiones</span>
        <div style="margin-left:auto" class="stack">
          <span class="chip">üåó Tema</span>
          <div id="themeSwitch" class="switch"><i></i></div>
        </div>
      </div>
    </header>

    <main class="grid" style="margin-top:22px">
      <section class="card pad">
        <h2 style="margin:0 0 8px">Fechas y horarios</h2>
        <p class="notice">Confirma tu asistencia y a√±ade cada sesi√≥n a tu calendario.</p>
        <div class="dates" id="dates"></div>
      </section>

      <aside class="card pad">
        <h3 style="margin-top:2px">Inscripci√≥n</h3>
        <p style="margin-top:6px;color:#cfe2ff">Recibir√°s recordatorios y materiales antes de iniciar.</p>
        <form id="form" onsubmit="return false">
          <div class="form-row">
            <div>
              <label for="nombre">Nombre y apellidos</label>
              <input id="nombre" required placeholder="Nombre Apellido" autocomplete="name"/>
            </div>
            <div>
              <label for="email">Correo electr√≥nico</label>
              <input id="email" type="email" required placeholder="correo@ejemplo.com" autocomplete="email"/>
            </div>
          </div>
          <div class="form-row" style="grid-template-columns:1fr">
            <div>
              <label for="sesion">Sesi√≥n a la que te inscribes</label>
              <select id="sesion"></select>
            </div>
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn primary" id="btnSave">‚úÖ Inscribirme</button>
            <button class="btn" id="btnClear">üóëÔ∏è Borrar mis datos</button>
          </div>
          <p id="msg" class="notice" style="display:none;margin-top:12px"></p>
        </form>
      </aside>
    </main>

    <section class="card pad" style="margin-top:22px">
      <h2 style="margin-top:0">Temario por m√≥dulos</h2>

      <details class="module" open>
        <summary>üìò M√≥dulo 1: Introducci√≥n a Moodle</summary>
        <div class="content">
          Fundamentos, ventajas, acceso, configuraci√≥n de perfil, estructura de cursos y roles de usuario.
        </div>
      </details>

      <details class="module">
        <summary>üß© M√≥dulo 2: Creaci√≥n de cursos y recursos</summary>
        <div class="content">
          Subida de documentos, organizaci√≥n en carpetas, enlaces, p√°ginas web, libros digitales y uso de etiquetas.
        </div>
      </details>

      <details class="module">
        <summary>ü§ù M√≥dulo 3: Actividades interactivas y colaborativas</summary>
        <div class="content">
          Foros, chats, wikis, glosarios y encuestas para un aprendizaje din√°mico.
        </div>
      </details>

      <details class="module">
        <summary>üß™ M√≥dulo 4: Evaluaci√≥n y seguimiento</summary>
        <div class="content">
          Estrategias de evaluaci√≥n y monitoreo del progreso estudiantil con herramientas de Moodle.
        </div>
      </details>

      <details class="module">
        <summary>üöÄ M√≥dulo 5: Proyecto final</summary>
        <div class="content">
          Dise√±o de un curso completo con recursos y actividades aplicando buenas pr√°cticas.
        </div>
      </details>
    </section>

    <section class="card pad" style="margin-top:22px">
      <h2 style="margin:0 0 10px">Inscritos (este dispositivo)</h2>
      <table class="table" id="table">
        <thead><tr><th>Nombre</th><th>Correo</th><th>Sesi√≥n</th><th>Fecha</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <p class="footer">¬©RobertClaros 2025 ‚Ä¢ Capacitaci√≥n Docente ‚Ä¢ Moodle</p>
  </div>

<script>
/** Utilidades **/
const SESSIONS = [
  { id:"s1", title:"Sesi√≥n 1 ‚Äî Martes 19 de agosto, 11:30 a. m.", startISO:"2025-08-19T11:30:00-05:00", endISO:"2025-08-19T13:00:00-05:00" },
  { id:"s2", title:"Sesi√≥n 2 ‚Äî Mi√©rcoles 20 de agosto, 4:00 p. m.", startISO:"2025-08-20T16:00:00-05:00", endISO:"2025-08-20T17:30:00-05:00" }
];

const fmtDate = (iso)=> new Date(iso).toLocaleString('es-PE', {
  dateStyle:'full', timeStyle:'short'
});

function createICS({title, description, startISO, endISO, location}){
  // Convert to UTC in basic format YYYYMMDDTHHMMSSZ
  const toICSDate = (iso)=>{
    const d=new Date(iso);
    const pad=n=>String(n).padStart(2,'0');
    return d.getUTCFullYear()+pad(d.getUTCMonth()+1)+pad(d.getUTCDate())+'T'+
           pad(d.getUTCHours())+pad(d.getUTCMinutes())+pad(d.getUTCSeconds())+'Z';
  };
  const uid = crypto.randomUUID?.() || (Date.now()+Math.random()).toString(36);
  const ics = [
    'BEGIN:VCALENDAR',
    'VERSION:2.0',
    'PRODID:-//Capacitacion Moodle//ES',
    'CALSCALE:GREGORIAN',
    'METHOD:PUBLISH',
    'BEGIN:VEVENT',
    'UID:'+uid,
    'DTSTAMP:'+toICSDate(new Date().toISOString()),
    'DTSTART:'+toICSDate(startISO),
    'DTEND:'+toICSDate(endISO),
    'SUMMARY:'+title,
    'DESCRIPTION:'+ (description||''),
    'LOCATION:'+ (location||'Virtual'),
    'END:VEVENT',
    'END:VCALENDAR'
  ].join('\r\n');
  return new Blob([ics], {type:'text/calendar;charset=utf-8'});
}

function googleCalendarUrl({title, startISO, endISO, details, location}){
  const p = new URLSearchParams({
    action:'TEMPLATE',
    text:title,
    dates: new Date(startISO).toISOString().replace(/[-:]/g,'').slice(0,15)+'Z/'+
           new Date(endISO).toISOString().replace(/[-:]/g,'').slice(0,15)+'Z',
    details: details||'Capacitaci√≥n docente: Moodle',
    location: location||'Presencial'
  });
  return 'https://www.google.com/calendar/render?'+p.toString();
}

function saveFile(blob, filename){
  const a=document.createElement('a');
  a.href= URL.createObjectURL(blob);
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  setTimeout(()=>{ URL.revokeObjectURL(a.href); a.remove(); }, 1000);
}

/** Render fechas **/
const datesWrap = document.getElementById('dates');
SESSIONS.forEach(s=>{
  const el = document.createElement('div');
  el.className='date-card';
  el.innerHTML = `
    <div class="row" style="justify-content:space-between">
      <h3>${s.title}</h3>
      <span class="chip">‚è±Ô∏è 90 min</span>
    </div>
    <p class="meta">${fmtDate(s.startISO)} (UTC-5)</p>
    <div class="row" style="margin-top:8px">
     <a href="https://aulavirtualvrht.edu.pe/course/view.php?id=91" class="btn primary">
    Aula Virtual
</a>
      <a class="btn accent" href="${googleCalendarUrl({title:s.title,startISO:s.startISO,endISO:s.endISO})}" target="_blank" rel="noopener">üóìÔ∏è Google Calendar</a>
    </div>
  `;
  datesWrap.appendChild(el);
});

datesWrap.addEventListener('click', e=>{
  const btn = e.target.closest('[data-ics]');
  if(!btn) return;
  const s = SESSIONS.find(x=>x.id===btn.dataset.ics);
  const blob = createICS({title:s.title, startISO:s.startISO, endISO:s.endISO, description:'Capacitaci√≥n Moodle', location:'Virtual'});
  saveFile(blob, s.id + '.ics');
});

/** Form **/
const sel = document.getElementById('sesion');
SESSIONS.forEach(s=>{
  const o=document.createElement('option');
  o.value = s.id; o.textContent = s.title;
  sel.appendChild(o);
});

const storageKey='capacitacion_moodle_registros_v1';
const tableBody = document.querySelector('#table tbody');
const msg = document.getElementById('msg');

function loadAll(){
  try{ return JSON.parse(localStorage.getItem(storageKey) || '[]'); }catch{ return [] }
}

function renderTable(){
  const data = loadAll();
  tableBody.innerHTML = data.map(r=>`<tr>
    <td>${r.nombre}</td>
    <td>${r.email}</td>
    <td>${SESSIONS.find(s=>s.id===r.sesion)?.title||r.sesion}</td>
    <td>${new Date(r.when).toLocaleString('es-PE')}</td>
  </tr>`).join('');
}
renderTable();

document.getElementById('btnSave').addEventListener('click', ()=>{
  const nombre = document.getElementById('nombre').value.trim();
  const email = document.getElementById('email').value.trim();
  const sesion = document.getElementById('sesion').value;
  if(!nombre || !email){ show('Completa tu nombre y correo.', true); return; }
  const recs = loadAll();
  recs.push({nombre, email, sesion, when: new Date().toISOString()});
  localStorage.setItem(storageKey, JSON.stringify(recs));
  renderTable();
  show('¬°Registro guardado! Muchas gracias por tu participaci√≥n, lo esperamos.', false);
  document.getElementById('form').reset();
});

document.getElementById('btnClear').addEventListener('click', ()=>{
  localStorage.removeItem(storageKey);
  renderTable();
  show('Se borraron las inscripciones guardadas en este navegador.', false);
});

function show(text, isError=false){
  msg.textContent = text;
  msg.style.display='block';
  msg.style.borderColor = isError? 'rgba(255,107,107,.6)': 'rgba(124,227,139,.6)';
  msg.style.color = isError? '#ffdede': '#d6ffe0';
}

/** Export CSV **/
document.getElementById('btnExport').addEventListener('click', ()=>{
  const data = loadAll();
  if(!data.length){ show('No hay inscripciones para exportar.', true); return; }
  const rows = [['Nombre','Correo','Sesi√≥n','Fecha']].concat(data.map(r=>[r.nombre,r.email,SESSIONS.find(s=>s.id===r.sesion)?.title||r.sesion,new Date(r.when).toLocaleString('es-PE')]));
  const csv = rows.map(r=>r.map(v=>`"${String(v).replace(/"/g,'""')}"`).join(',')).join('\r\n');
  saveFile(new Blob([csv], {type:'text/csv'}), 'inscripciones.csv');
});

/** Compartir **/
document.getElementById('btnShare').addEventListener('click', async ()=>{
  const url = location.href;
  const title = document.title;
  const text = '√önete a la Capacitaci√≥n para Docentes: Domina el aula presencial con Moodle.';
  if(navigator.share){
    try{ await navigator.share({title, text, url}); }catch{}
  }else{
    await navigator.clipboard.writeText(url);
    show('Enlace copiado al portapapeles: '+url);
  }
});

/** Tema **/
const themeSwitch = document.getElementById('themeSwitch');
const themeKey='cap_moodle_theme';
const current = localStorage.getItem(themeKey)||'dark';
applyTheme(current);
if(current==='light'){ themeSwitch.classList.add('on'); }
themeSwitch.addEventListener('click', ()=>{
  themeSwitch.classList.toggle('on');
  const mode = themeSwitch.classList.contains('on')? 'light':'dark';
  applyTheme(mode);
  localStorage.setItem(themeKey, mode);
});

function applyTheme(mode){
  if(mode==='light'){
    // Fondo claro
    document.documentElement.style.setProperty('--bg','#f6f8ff');
    document.documentElement.style.setProperty('--card','#ffffff');
    document.documentElement.style.setProperty('--text','#0f1b33'); // texto oscuro
    document.documentElement.style.setProperty('--muted','##0f1b33'); // gris oscuro
  }else{
    // Fondo oscuro
    document.documentElement.style.setProperty('--bg','#0e1726');
    document.documentElement.style.setProperty('--card','#111a2b');
    document.documentElement.style.setProperty('--text','#e6eefc'); // texto claro
    document.documentElement.style.setProperty('--muted','##0f1b33'); // gris claro
  }
}

</script>
</body>
</html>
